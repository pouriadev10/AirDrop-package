import{asyncToGenerator as n}from"../_virtual/_rollupPluginBabelHelpers.js";import r from"bs58";import{VersionedMessage as e,VersionedTransaction as i}from"@solana/web3.js";import{joinUrlSegments as t}from"./urlHelper.js";var o=function(){var t=n((function*(n,t){var o=new Uint8Array(r.decode(t)),a=e.deserialize(o),s=new i(a),l=(yield n.signTransaction(s)).serialize();return r.encode(l)}));return function(n,r){return t.apply(this,arguments)}}(),a=function(){var r=n((function*(n,r,e,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=yield t(n,r,"api/send-signed-transaction/"),l={signed_transaction:i};o&&(l.mint_token=o),a&&(l.program=a);var u=yield fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:e},body:JSON.stringify(l)}),c=yield u.json();return u.ok||console.error("Error in sending transaction: ".concat(JSON.stringify(c))),c.signature}));return function(n,e,i,t){return r.apply(this,arguments)}}();export{a as sendTransaction,o as signTransaction};
