import{asyncToGenerator as r,objectSpread2 as o}from"../../_virtual/_rollupPluginBabelHelpers.js";import{useState as a,useCallback as t}from"react";import{Flex as l,Button as e,Text as i}from"@chakra-ui/react";import{CallProgramInstruction as p}from"../../api/program.js";import"@solana/web3.js";import"bs58";import{parseFormValues as s,getInstructionAdditionalData as n}from"../../utils/componentHelper.js";import{ButtonModal as m}from"./ButtonModal.js";import{jsxs as d,jsx as u}from"react/jsx-runtime";import{useConfig as c}from"../../ConfigContext.js";import"../airdrop/Dashboard.js";import"@solana/wallet-adapter-phantom";import"@solana/wallet-adapter-solflare";import"@solana/wallet-adapter-react-ui";import"../wallet/WalletModal.js";import"../wallet/WalletProviders.js";import"@solana/wallet-adapter-react";var f=f=>{var{authToken:b,wallet:j,label:P,flexProps:h,buttonProps:w,instructionName:x,modalData:v=null,additionalInstructionData:g=[]}=f,y=c(),[k,F]=a(!1),[M,C]=a({}),D=t(r((function*(){try{var r={};if(v)r=yield s(M,v.inputFields);if(g){var a=yield n(y,b,j,g);r=o(o({},r),a)}yield p(y.backendUrl,y.airdropAppRoot,b,j,y.programId,x,r)}catch(r){console.error("Error during submission:",r)}})),[M,v,g,x]),I=t((()=>{v?F(!0):D()}),[v,D]);return d(l,o(o({},h),{},{children:[u(e,o(o({},w),{},{onClick:I,children:u(i,o(o({},P.labelProps),{},{children:P.text}))})),v&&u(m,{label:v.label,inputFields:v.inputFields,isModalOpen:k,setIsModalOpen:F,formValues:M,setFormValues:C,onSubmit:D,flexProps:v.flexProps,modalProps:v.modalProps})]}))};export{f as ItemButton};
