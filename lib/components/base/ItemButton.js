import{asyncToGenerator as r,objectSpread2 as o}from"../../_virtual/_rollupPluginBabelHelpers.js";import{useState as a,useCallback as t}from"react";import{Flex as l,Button as e,Text as i}from"@chakra-ui/react";import"buffer";import{CallProgramInstruction as p}from"../../api/program.js";import"@solana/web3.js";import"bs58";import{parseFormValues as s,getInstructionAdditionalData as n}from"../../utils/componentHelper.js";import{ButtonModal as m}from"./ButtonModal.js";import{jsxs as d,jsx as u}from"react/jsx-runtime";import"@chakra-ui/icons";import{useConfig as c}from"../../ConfigContext.js";import"../airdrop/Dashboard.js";import"../airdrop/Instruction.js";import"../airdrop/Task.js";import"@solana/wallet-adapter-phantom";import"@solana/wallet-adapter-solflare";import"@solana/wallet-adapter-react-ui";import"../wallet/WalletModal.js";import"@solana/wallet-adapter-react";var f=f=>{var{programId:b,authToken:j,wallet:h,label:P,flexProps:w,buttonProps:x,instructionName:k,modalData:g=null,additionalInstructionData:v=[]}=f,y=c(),[F,I]=a(!1),[M,C]=a({}),D=t(r((function*(){try{var r={};if(g)r=yield s(M,g.inputFields);if(v){var a=yield n(y,j,h,v);r=o(o({},r),a)}yield p(y.backendUrl,y.airdropAppRoot,j,h,b,k,r)}catch(r){console.error("Error during submission:",r)}})),[M,g,v,k]),T=t((()=>{g?I(!0):D()}),[g,D]);return d(l,o(o({},w),{},{children:[u(e,o(o({},x),{},{onClick:T,children:u(i,o(o({},P.labelProps),{},{children:P.text}))})),g&&u(m,{label:g.label,inputFields:g.inputFields,isModalOpen:F,setIsModalOpen:I,formValues:M,setFormValues:C,onSubmit:D,flexProps:g.flexProps,modalProps:g.modalProps})]}))};export{f as ItemButton};
