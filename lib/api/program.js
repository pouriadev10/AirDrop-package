import{asyncToGenerator as n}from"../_virtual/_rollupPluginBabelHelpers.js";import{Connection as r}from"@solana/web3.js";import{joinUrlSegments as t,getProgramNetworkUrl as o}from"../utils/urlHelper.js";import{signTransaction as e,sendTransaction as i}from"../utils/transactionHelper.js";import{handleRequestTimeout as a}from"../utils/timeoutHelper.js";var l=function(){var r=n((function*(n,r,o,a,l,s){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=yield t(n,r,"api/assemble-program-transaction/"),p={program:l,instruction_name:s,data:c},d=yield fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify(p)});if(!d.ok)return console.error("Error in assembling program Transaction: ".concat(JSON.stringify(yield d.json()))),null;var f=yield d.json(),y=yield e(a,f.assembledTransaction);return yield i(n,r,o,y,null,l)}));return function(n,t,o,e,i,a){return r.apply(this,arguments)}}(),s=function(){var r=n((function*(n,r,o,e,i){var a=yield t(n,r,"api/fetch-program-account/"),l={program:e,account_type_name:i},s=yield fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify(l)}),c=yield s.json();return s.ok||console.error("Error in fetching program account: ".concat(JSON.stringify(c))),c.account}));return function(n,t,o,e,i){return r.apply(this,arguments)}}(),c=function(){var t=n((function*(n,t,e,i,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"confirmed",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,p=yield o(n,t,e,i),d=new r(p).getParsedTransaction(l,s);return yield a(d,c,u)}));return function(n,r,o,e,i){return t.apply(this,arguments)}}(),u=function(){var t=n((function*(n,t,e,i,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"confirmed",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,p=yield o(n,t,e,i),d=new r(p).getTransaction(l,s);return yield a(d,c,u)}));return function(n,r,o,e,i){return t.apply(this,arguments)}}();export{l as CallProgramInstruction,s as GetProgramAccount,c as getProgramParsedTransaction,u as getProgramTransaction};
