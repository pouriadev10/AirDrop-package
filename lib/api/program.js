import{asyncToGenerator as n}from"../_virtual/_rollupPluginBabelHelpers.js";import{Connection as r}from"@solana/web3.js";import{joinUrlSegments as t,getProgramNetworkUrl as o}from"../utils/urlHelper.js";import{signTransaction as i,sendTransaction as e}from"../utils/transactionHelper.js";import{handleRequestTimeout as a}from"../utils/timeoutHelper.js";var l=function(){var r=n((function*(n,r,o,a,l,s){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=yield t(n,r,"api/assemble-program-transaction/"),p={program:l,instruction_name:s,data:c},d=yield fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify(p)});if(!d.ok)return console.error("Error in assembling program Transaction: ".concat(JSON.stringify(yield d.json()))),null;var f=yield d.json(),y=yield i(a,f.assembledTransaction);return yield e(n,r,o,y,null,l)}));return function(n,t,o,i,e,a){return r.apply(this,arguments)}}(),s=function(){var r=n((function*(n,r,o,i,e){var a=yield t(n,r,"api/fetch-program-account/"),l={program:i,account_type_name:e},s=yield fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify(l)}),c=yield s.json();return s.ok||console.error("Error in fetching program account: ".concat(JSON.stringify(c))),c.account}));return function(n,t,o,i,e){return r.apply(this,arguments)}}(),c=function(){var t=n((function*(n,t,i,e,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"confirmed",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,p=yield o(n,t,i,e),d=new r(p).getParsedTransaction(l,s);return yield a(d,c,u)}));return function(n,r,o,i,e){return t.apply(this,arguments)}}(),u=function(){var t=n((function*(n,t,i,e,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"confirmed",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,p=yield o(n,t,i,e),d=new r(p).getTransaction(l,s);return yield a(d,c,u)}));return function(n,r,o,i,e){return t.apply(this,arguments)}}(),p=function(){var r=n((function*(n,r,o){var i=yield t(n,r,"api/program-list/"),e=yield fetch(i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:o}}),a=yield e.json();return e.ok||console.error("Error in getting user transactions list: ".concat(JSON.stringify(a))),console.log(a,typeof a),a}));return function(n,t,o){return r.apply(this,arguments)}}();export{l as CallProgramInstruction,s as GetProgramAccount,p as GetProgramList,c as getProgramParsedTransaction,u as getProgramTransaction};
