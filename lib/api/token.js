import{asyncToGenerator as n}from"../_virtual/_rollupPluginBabelHelpers.js";import{Connection as r}from"@solana/web3.js";import{joinUrlSegments as t,getTokenNetworkUrl as e}from"../utils/urlHelper.js";import{signTransaction as i,sendTransaction as o}from"../utils/transactionHelper.js";import{handleRequestTimeout as a}from"../utils/timeoutHelper.js";var l=function(){var r=n((function*(n,r,e,i){var o=yield t(n,r,"api/get-user-ata/"),a=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:e},body:JSON.stringify({mint_token:i})}),l=yield a.json();return a.ok?l.hasATA?l.ATAAddress:null:(console.error("Error in getting user ATA: ".concat(JSON.stringify(l))),null)}));return function(n,t,e,i){return r.apply(this,arguments)}}(),s=function(){var r=n((function*(n,r,e,a,l){var s=yield t(n,r,"api/assemble-ata-transaction/"),u=yield fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:e},body:JSON.stringify({mint_token:l})});if(!u.ok)return console.error("Error in creating user ATA Transaction: ".concat(JSON.stringify(yield u.json()))),null;var c=yield u.json(),d=yield i(a,c.assembledTransaction);return yield o(n,r,e,d,l,null)}));return function(n,t,e,i,o){return r.apply(this,arguments)}}(),u=function(){var t=n((function*(n,t,i,o,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"confirmed",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,d=yield e(n,t,i,o),p=new r(d).getParsedTransaction(l,s);return yield a(p,u,c)}));return function(n,r,e,i,o){return t.apply(this,arguments)}}(),c=function(){var t=n((function*(n,t,i,o,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"confirmed",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,d=yield e(n,t,i,o),p=new r(d).getTransaction(l,s);return yield a(p,u,c)}));return function(n,r,e,i,o){return t.apply(this,arguments)}}();export{s as CreateATA,u as getTokenParsedTransaction,c as getTokenTransaction,l as getUserATA};
